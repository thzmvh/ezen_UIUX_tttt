"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{98332:function(e,n,t){t.d(n,{Z:function(){return y}});var r=t(94275),o=t(63081),i=t.n(o),a=(t(7243),t(61398),t(25849),t(75686),t(36038),t(9554),t(64069),t(51963),t(53371),t(41649)),c=t.n(a),s=t(72139),u=t.n(s),l=t(81394),d=t(89703),f=t(18627),m=t(37022),p=t(30627),C=t.n(p),g=t(91661),v=t(5961),h=t(9497),S=t(36233),x=t.n(S);function E(e){var n=e.key,t=(0,d.useState)(!1),r=t[0],o=t[1],i=(0,d.useState)(null),a=i[0],c=i[1];(0,d.useEffect)((function(){s()}),[]),(0,d.useEffect)((function(){if(a){l();var e=m();o(a!==1*e)}}),[a]);var s=function(){var e=l(),n=f();n&&!p(n)||(o(!0),localStorage.removeItem(e.time),localStorage.removeItem(e.value))},l=function(){return{time:"".concat(n,"_time"),value:"".concat(n,"_value")}},f=function(){var e=l();return localStorage.getItem(e.time)},m=function(){var e=l();return localStorage.getItem(e.value)},p=function(e){var n=u()().set("hour",0).set("minute",0).set("second",0).set("millisecond",0),t=u()(u().unix(e)).set("hour",0).set("minute",0).set("second",0).set("millisecond",0);return n.diff(t,"day",!0)>0};return{isShow:r,handleBadge:function(){var e=l();o(!1),localStorage.setItem(e.time,JSON.stringify(u()().unix())),localStorage.setItem(e.value,JSON.stringify(a))},handleValue:function(e){c(e)}}}u().extend(x());var I=t(92769),q=t(92532),U=t(84589),T=t(71229),k=t(2891),w=t(62676),b=t(76314),L=t(89668),M=t(49456),_=t(20348),D=t(86025);u().extend(D);var P=c().bind(C());function y(e){var n=e.adType,t=e.shoppingData,o=e.brandShopData,a=e.mallNameLinkData,c=e.focusItemData,s=e.newsData,p=e.todayPickData,C=e.title,S=e.bridgeUrl,x=(0,v.h)(1,t.length),D=x.totalPages,y=x.page,R=x.next,O=x.prev,N=x.index,B=x.isLast,A=(0,v.s)(),z=A.reviewCount,j=A.cartCount,F=A.orderCount,K=A.countFormat,Y=A.isSingleDigit,Z=(0,U.Z)().isDarkMode,V=(0,d.useState)([]),H=V[0],$=V[1],G=(0,d.useState)([]),W=G[0],J=G[1],Q=(0,l.useRouter)(),X=(0,h.Z)().isLogin,ee=(0,d.useState)(-1),ne=ee[0],te=ee[1],re=(0,d.useState)(null),oe=re[0],ie=re[1],ae=E({key:"review"}),ce=ae.isShow,se=ae.handleBadge,ue=ae.handleValue,le=E({key:"cart"}),de=le.isShow,fe=le.handleBadge,me=le.handleValue,pe=E({key:"order"}),Ce=pe.isShow,ge=pe.handleBadge,ve=pe.handleValue,he=(0,d.useState)(0),Se=he[0],xe=he[1],Ee=(0,q.Z)(),Ie=Ee.recommendItemCurrentPage,qe=Ee.recommendItemTotalPage,Ue=Ee.recommendItemPage,Te=Ee.selectedCntsSeq,ke=Ee.setSelectedCntsSeq,we=Ee.nextRecommendItem,be=Ee.prevRecommendItem,Le=Ee.initRecommendItems,Me=Ee.isExpanded,_e=Ee.restoreRcmdScroll,De=(0,I.Z)(),Pe=De.isExistExposeUrl,ye=De.convertExposeUrl,Re=De.convertMallItemExposeUrl,Oe=De.convertRecoItemCntsExposeUrl,Ne=De.mergeExposeUrlList,Be=De.isMallItemExposeUrl,Ae=De.isRecoItemExposeUrl,ze=De.mergeMallItemExposeUrlList,je=De.mergeRecoItemExposeUrlList,Fe=De.addExposeUrlList;(0,d.useEffect)((function(){J(a.map((function(e){return(0,f.l$)(e,1)}))),Ke()}),[]),(0,d.useEffect)((function(){ue(z)}),[z]),(0,d.useEffect)((function(){me(j)}),[j]),(0,d.useEffect)((function(){ve(F)}),[F]),(0,d.useEffect)((function(){var e="";window&&(e=window.location.origin);var n=e.includes("shopsquare")?"":g.k.getConfig().proxyPath;(0,M.rj)(X,(function(){return Q.push("".concat(n,"/plusdeal"))}))}),[X]),(0,d.useEffect)((function(){if(o.length>0){var e=o[N%o.length].contentsList.filter((function(e){return""!==e.adCntsDesc2&&"0"!==e.adCntsDesc2})).map((function(e){return e.adCntsSeq})).sort((function(){return Math.random()-.5})).slice(0,2);$(e)}Ke(),Le()}),[y]),(0,d.useEffect)((function(){Ue.length>0&&He()}),[Ue]),(0,d.useEffect)((function(){Me()&&(Ve(),Ze())}),[Me()]),(0,d.useEffect)((function(){if(null===oe)if(u()().second()%2===1){var e=on();te(e),ie(e>-1)}else te(-1),ie(!1);else $e()}),[oe]);var Ke=function(){ie(null)},Ye=function(e){return H.includes(e)},Ze=function(){var e=(0,r.default)(i().mark((function e(){var t,r,o,a,s,u,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!We()){e.next=12;break}if(t=Xe(),r=c[t],o=c.filter((function(e){return e.adBrdSeq!==r.adBrdSeq})),!((a=o[Te%o.length])&&a.contentsList&&a.contentsList.length>0)){e.next=12;break}return s={adCntsSeq:a.contentsList[0].adCntsSeq,bizCd:a.contentsList[0].bizCd,inflowCd:b.d[n].FOCUS_TEM,expsTrtrCd:w.m[n].FOCUS_TEM2,expsPage:y},u=[s].filter((function(e){return!Pe(e.adCntsSeq)})),e.next=10,k.K.BY_ITEMS(u,null);case 10:l=e.sent,Fe(l);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ve=function(){var e=(0,r.default)(i().mark((function e(){var r,o,a,c,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t[N].map((function(e){return e.contentsList[0].adCntsSeq})).indexOf(Te),!(o=t[N][r])){e.next=10;break}return a=o.contentsList[0],c=(c=[{adCntsSeq:null===a||void 0===a?void 0:a.adCntsSeq,bizCd:null===a||void 0===a?void 0:a.bizCd,inflowCd:b.d[n].HOT_ITEM,expsTrtrCd:w.m[n].RCMD_MALL_NM,redirectUrl:null===a||void 0===a?void 0:a.adCntsUrl2}]).filter((function(e){return!Be(e.adCntsSeq)})),e.next=8,k.K.BY_ITEMS(c,null);case 8:(s=e.sent).length>0&&ze(s[0]);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),He=function(){var e=(0,r.default)(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],Ue&&Ue.length>0&&(t=t.concat(Ue.map((function(e,t){var r="UNKNOWN";return"K14006"===e.cntsSrcTpCd?r="CLOVA":"K14001"===e.cntsSrcTpCd&&(r="EP"),{adCntsSeq:e.adCntsSeq,bizCd:e.bizCd,inflowCd:b.d[n].HOT_ITEM,expsTrtrCd:w.m[n]["RCMD_ITEM_".concat(t+1)],cntsGrpCd:r,expsPage:Ie}})))),t=t.filter((function(e){return!Ae(e.adCntsSeq)})),e.next=5,k.K.BY_ITEMS(t,null);case 5:r=e.sent,je(r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$e=function(){var e=(0,r.default)(i().mark((function e(){var r,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],t.length>0&&(r=r.concat(t[N].map((function(e){return e.contentsList})).flatMap((function(e){return e})).map((function(e,t){var r=oe&&ne===t?"AUTO":"MANUAL",o=e.videoUrl,i="HOT_ITEM_".concat(o?"VIDEO_".concat(r,"_"):"").concat(t+1);return{adCntsSeq:null===e||void 0===e?void 0:e.adCntsSeq,bizCd:null===e||void 0===e?void 0:e.bizCd,inflowCd:b.d[n].HOT_ITEM,expsTrtrCd:w.m[n][i],cntsGrpCd:oe?"AUTO":"MANUAL",expsPage:y}})))),p.length>0&&(r=r.concat(p[N%p.length].contentsList.map((function(e,t){return{adCntsSeq:null===e||void 0===e?void 0:e.adCntsSeq,bizCd:null===e||void 0===e?void 0:e.bizCd,inflowCd:b.d[n].TODAY_PICK,expsTrtrCd:w.m[n].TODAY_PICK,expsPage:y}})))),We()&&(r=r.concat(c[Xe()].contentsList.map((function(e,t){return{adCntsSeq:null===e||void 0===e?void 0:e.adCntsSeq,bizCd:null===e||void 0===e?void 0:e.bizCd,inflowCd:b.d[n].FOCUS_TEM,expsTrtrCd:w.m[n].FOCUS_TEM,expsPage:y}})))),Ge()&&(r=r.concat(a.flatMap((function(e){return e})).map((function(e){return e.contentsList})).flatMap((function(e){return e})).map((function(e,t){return{adCntsSeq:null===e||void 0===e?void 0:e.adCntsSeq,bizCd:null===e||void 0===e?void 0:e.bizCd,inflowCd:b.d[n].MALL_NAME_LINK,expsTrtrCd:w.m[n].MALL_NAME_LINK,expsPage:y}})))),Je()&&(r=r.concat(s[0].contentsList.map((function(e,t){return{adCntsSeq:null===e||void 0===e?void 0:e.adCntsSeq,bizCd:null===e||void 0===e?void 0:e.bizCd,inflowCd:b.d[n].NEWS,expsTrtrCd:w.m[n]["NEWS_".concat(t+1)],expsPage:y}})))),Qe()&&(r=r.concat(o[N%o.length].contentsList.map((function(e,t){return{adCntsSeq:null===e||void 0===e?void 0:e.adCntsSeq,bizCd:null===e||void 0===e?void 0:e.bizCd,inflowCd:b.d[n].BRAND_SHOP,expsTrtrCd:w.m[n]["BRAND_SHOP_".concat(e.adCntsOrd)],expsPage:y}})))),r=r.filter((function(e){return!Pe(e.adCntsSeq)})),e.next=10,k.K.BY_ITEMS(r,null);case 10:u=e.sent,Ne(u);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ge=function(){return!Je()&&!Qe()&&a.length>0},We=function(){return!Je()&&!Qe()&&c.length>0},Je=function(){return y===D&&s.length>0&&s[0].contentsList.length>=6},Qe=function(){return o.length>0&&o[N%o.length]&&y>1},Xe=function(){if(nn()>=0){var e=D*c.length/nn()/c.length;return Math.floor(Se/e)}return N<c.length?N:N%c.length},en=function(e){var n="#D07A7A",t="#7292B9",r="#9288BD",o="#56A07B",i="#888CB3";if(!Z)return e;switch(e){case"#920D0D":return n;case"#144582":return t;case"#6656AA":return r;case"#268053":return o;case"#292F60":return i;default:return e}},nn=function(){return 2},tn=function(){var e=nn(),n=D*c.length/e-1;xe(Se<n?Se+1:0)},rn=function(){var e=nn(),n=D*c.length/e-1;xe(Se>0?Se-1:n)},on=function(){if(!t||!t[N])return-1;var e=t[N].length<5?t[N].length:5,n=t[N].slice(0,e).map((function(e){return e.contentsList})).flatMap((function(e){return e})).map((function(e){return e.videoUrl})),r=n.filter((function(e){return null!==e&&""!==e})),o=r[Math.floor(Math.random()*r.length)];return o?n.indexOf(o):-1};return(0,_.jsxs)(_.Fragment,{children:[p.length>0&&p[N%p.length]&&(0,_.jsx)(m.Y8,{adType:n,convertExposeUrl:ye,item:p[N%p.length],totalPages:D,page:y,next:function(e){L.t.click(e,L.t.shoppingblock[n].itemnext2),R(e),tn()},prev:function(e){L.t.click(e,L.t.shoppingblock[n].itemprev2),O(e),rn()},isDarkMode:Z}),(0,_.jsxs)("div",{className:P("commerce_area",Me()&&"is_expanded"),role:"tabpanel",children:[t.length>0&&(0,_.jsx)(m.UM,{page:y,adType:n,convertExposeUrl:ye,convertMallItemExposeUrl:Re,convertRecoItemCntsExposeUrl:Oe,items:t[N],isLast:B,bridgeUrl:S,handleActiveVideo:function(e,t,r){ne===r?(L.t.click(e,L.t.shoppingblock[n].hotitemstop),te(-1)):(L.t.click(e,L.t.shoppingblock[n].hotitemplay),te(r))},handleItemClick:function(e,r){L.t.click(e,L.t.shoppingblock[n]["hotitem".concat(r+1)]);var o=t[N][r].contentsList[0].adCntsSeq;Te!==o&&(Le(),ke(o)),e.stopPropagation()},getItemLinkUrl:function(e){var r=t[N][e].contentsList[0],o=r.adCntsSeq,i=r.adCntsUrl1;return B&&e===(0,T.D)(n)-1?"".concat(S,"?cntsSeq=").concat(o):ye(o,i)},activeVideoIndex:ne,isAutoPlay:oe,selectedCntsSeq:Te,showRecommendLayer:function(e){return Me()&&e.filter((function(e){return e.contentsList[0].adCntsSeq===Te})).length>0},recommendItemPage:Ue,nextRecommendItem:we,prevRecommendItem:be,initRecommendItems:Le,recommendItemCurrentPage:Ie,recommendItemTotalPage:qe,getItemColSize:function(){return(0,T.D)(n)/2},moreIndex:(0,T.D)(n)-1}),(0,_.jsx)("div",{className:P("shopping_desc"),children:function(){if(Je())return(0,_.jsx)(m.Sq,{page:y,adType:n,convertExposeUrl:ye,board:s[0],isExpanded:Me});var e=o[N%o.length];if(Qe())return(0,_.jsx)(m.DN,{page:y,adType:n,convertExposeUrl:ye,item:e,index:N-1,isDarkMode:Z,showDiscountLabel:Ye,isExpanded:Me});var t=Xe(),r=c[t],i=c.filter((function(e){return e.adBrdSeq!==r.adBrdSeq})),u=i[Te%i.length];return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(m.$8,{adType:n,convertExposeUrl:ye,items:a,boldIndexList:W}),(0,_.jsx)(m.tk,{adType:n,reviewCount:z,cartCount:j,orderCount:F,countFormat:K,isSingleDigit:Y,isShowReviewBadge:ce,handleShowReviewBadge:se,isShowCartBadge:de,handleShowCartBadge:fe,isShowOrderBadge:Ce,handleShowOrderBadge:ge}),c&&c.length>0&&("C"===c[Xe()].brdTpCd?(0,_.jsx)(m.D0,{adType:n,convertExposeUrl:ye,item:r,handleNclicks:function(e){return L.t.click(e,L.t.shoppingblock[n].focustem)}}):(0,_.jsx)(m.xC,{adType:n,convertExposeUrl:ye,item:r,convertFocusTagColor:en,handleNclicks:function(e){return L.t.click(e,L.t.shoppingblock[n].focustem)}})),Me()&&u&&("C"===u.brdTpCd?(0,_.jsx)(m.D0,{adType:n,convertExposeUrl:ye,item:u,handleNclicks:function(e){return L.t.click(e,L.t.shoppingblock[n].focustem2)}}):(0,_.jsx)(m.xC,{adType:n,convertExposeUrl:ye,item:u,convertFocusTagColor:en,handleNclicks:function(e){return L.t.click(e,L.t.shoppingblock[n].focustem2)}}))]})}()})]}),(0,_.jsx)(m.tl,{totalPages:D,page:y,next:function(e){_e(),L.t.click(e,L.t.shoppingblock[n].itemnext),R(e),tn()},prev:function(e){_e(),L.t.click(e,L.t.shoppingblock[n].itemprev),O(e),rn()},title:C,showAdTag:!0})]})}},92769:function(e,n,t){t.d(n,{Z:function(){return o}});t(35573),t(10249),t(88826),t(83197),t(9833),t(46338),t(64069),t(9554),t(61398),t(25849),t(7243);var r=t(89703);function o(){var e=(0,r.useState)([]),n=e[0],t=e[1],o=(0,r.useState)([]),i=o[0],a=o[1],c=(0,r.useState)([]),s=c[0],u=c[1];return{isExistExposeUrl:function(e){return n.filter((function(n){return 1*n.adCntsSeq===1*e})).length>0},isMallItemExposeUrl:function(e){return i.filter((function(n){return 1*n.adCntsSeq===1*e})).length>0},isRecoItemExposeUrl:function(e){return s.filter((function(n){return 1*n.adCntsSeq===1*e})).length>0},convertExposeUrl:function(e,t){var r=n.find((function(n){return 1*n.adCntsSeq===1*e}));return r?r.adCntsUrl:t},convertMallItemExposeUrl:function(e,n){var t=i.find((function(n){return 1*n.adCntsSeq===1*e}));return t?t.mallUrl:n},convertRecoItemCntsExposeUrl:function(e,n){var t=s.find((function(n){return 1*n.adCntsSeq===1*e}));return t?t.adCntsUrl:n},mergeExposeUrlList:function(e){t(n.filter((function(n){return e.map((function(e){return e.adCntsSeq})).includes(n.adCntsSeq)})).concat(e))},addExposeUrlList:function(e){t(n.concat(e))},mergeMallItemExposeUrlList:function(e){var n=new URL(e.adCntsUrl);n.searchParams.delete("ru");var t=e.adCntsUrl,r=n.href;a(i.concat([{adCntsSeq:e.adCntsSeq,mallUrl:t,cntsUrl:r}]))},mergeRecoItemExposeUrlList:function(e){u(s.filter((function(n){return e.map((function(e){return e.adCntsSeq})).includes(n.adCntsSeq)})).concat(e))}}}},92532:function(e,n,t){t.d(n,{Z:function(){return u}});t(75686);var r,o=t(89703),i=t(88522),a=t(54617),c=(0,t(67612).gql)(r||(r=(0,a.Z)(["\n  query($adCntsSeq: String) {\n    data: getClovaRecommendContentsList(adCntsSeq: $adCntsSeq) {\n      adCntsOrd\n      adCntsSeq\n      adBrdSeq\n      adCntsImg1\n      adCntsImg2\n      adCntsImg3\n      adCntsImg4\n      adCntsUrl1\n      adCntsUrl2\n      adCntsDesc1\n      adCntsDesc2\n      adCntsDesc3\n      adCntsDesc4\n      benefitTypes\n      tags\n      backGroundColorCode\n      bizCd\n\n      reviewCount\n      price\n\n      cntsSrcTpCd\n    }\n  }\n"]))),s=t(55579);function u(){var e=(0,o.useState)(0),n=e[0],t=e[1],r=(0,o.useState)([]),a=r[0],u=r[1],l=(0,o.useState)(null),d=l[0],f=l[1],m=(0,i.ZP)(null!==d?c:null,(function(e){return(0,s.dY)(e,["adCntsSeq",d])}),{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1}),p=m.data,C=(m.error,m.mutate);(0,o.useEffect)((function(){null!==d&&C()}),[d]),(0,o.useEffect)((function(){if(void 0!==p&&p.length>0){var e=function(e,n){for(var t=[],r=0;r<e.length;r+=n)t.push(e.slice(r,r+n));return t}(p,5);u(e),v(744)}else u([]),v(560)}),[p]);var g=function(){v(560)},v=function(e){try{window.parent.postMessage({name:"height",value:e},"*")}catch(n){console.error(n)}},h=function(){return a.length>0&&d>0};var S=d&&a&&a.length>0?a[n]:[];return{isExpanded:h,recommendItemCurrentPage:n+1,recommendItemTotalPage:a.length,recommendItemPage:S,selectedCntsSeq:d,setSelectedCntsSeq:f,nextRecommendItem:function(){n<a.length-1?t(n+1):t(0)},prevRecommendItem:function(){t(0===n?a.length-1:n-1)},initRecommendItems:function(){u([]),f(null),t(0),g()},initContainerHeight:g,restoreRcmdScroll:function(){h()&&window.parent.postMessage({name:"scrollY",delta:-184},"*")}}}}}]);